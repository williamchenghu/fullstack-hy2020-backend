{"version":3,"sources":["components/Fields.js","components/PersonForm.js","components/Persons.js","components/Notification.js","services/data.js","App.js","index.js"],"names":["Fields","fieldName","newField","handleFieldChange","value","onChange","PersonForm","addPerson","addName","addNumber","handleNameChange","handleNumberChange","onSubmit","type","Persons","personList","filterKey","deletePerson","filter","e","name","toLowerCase","includes","map","key","number","onClick","id","Notification","message","messageStyle","style","baseURL","source","axios","CancelToken","get","cancelToken","token","then","response","data","catch","error","isCancel","console","log","alert","newObject","post","put","delete","cancel","messagePositive","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","messageNegative","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","setMessage","setMessageStyle","useEffect","a","dataAPI","initialData","fetchPersons","event","target","preventDefault","personObject","matchPerson","find","window","confirm","returnedData","setTimeout","concat","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4d9edf1d.chunk.js","sourcesContent":["import React from 'react';\n\nconst Fields = ({ fieldName, newField, handleFieldChange }) => (\n  <div>\n    {fieldName}: <input value={newField} onChange={handleFieldChange} />\n  </div>\n);\n\nexport default Fields;\n","import React from 'react';\nimport Fields from './Fields';\n\nconst PersonForm = ({\n  addPerson,\n  addName,\n  addNumber,\n  handleNameChange,\n  handleNumberChange,\n}) => (\n  <form onSubmit={addPerson}>\n    <Fields\n      fieldName=\"name\"\n      newField={addName}\n      handleFieldChange={handleNameChange}\n    />\n    <Fields\n      fieldName=\"number\"\n      newField={addNumber}\n      handleFieldChange={handleNumberChange}\n    />\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n);\n\nexport default PersonForm;\n","import React from 'react';\n\nconst Persons = ({ personList, filterKey, deletePerson }) =>\n  personList\n    .filter((e) => e.name.toLowerCase().includes(filterKey.toLowerCase()))\n    .map((e) => (\n      <div key={e.name}>\n        {e.name} {e.number}{' '}\n        <button onClick={() => deletePerson(e.id)}>delete</button>\n      </div>\n    ));\n\nexport default Persons;\n","import React from 'react';\n\nconst Notification = ({ message, messageStyle }) => {\n  if (message === null) {\n    return null;\n  }\n\n  return <div style={messageStyle}>{message}</div>;\n};\n\nexport default Notification;\n","import axios from 'axios';\n\nconst baseURL = '/api/persons';\nconst source = axios.CancelToken.source();\n\nconst getAll = () => {\n  const request = axios.get(baseURL, { cancelToken: source.token });\n  return request\n    .then((response) => response.data)\n    .catch((error) => {\n      axios.isCancel(error)\n        ? console.log('Fetching phonebook data is cancelled')\n        : alert(error);\n    });\n};\n\nconst create = (newObject) => {\n  const request = axios.post(baseURL, newObject);\n  return request.then((response) => response.data);\n};\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseURL}/${id}`, newObject);\n  return request.then((response) => response.data);\n};\n\nconst deleteEntry = (id) => axios.delete(`${baseURL}/${id}`);\n\nconst cancelToken = () => source.cancel();\n\nexport default { getAll, create, update, deleteEntry, cancelToken };\n","import React, { useState, useEffect } from 'react';\nimport Fields from './components/Fields';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\nimport Notification from './components/Notification';\nimport dataAPI from './services/data';\n\nconst messagePositive = {\n  color: 'green',\n  background: 'lightgrey',\n  fontSize: 20,\n  borderStyle: 'solid',\n  borderRadius: 5,\n  padding: 10,\n  marginBottom: 10,\n};\n\nconst messageNegative = {\n  color: 'red',\n  background: 'lightgrey',\n  fontSize: 20,\n  borderStyle: 'solid',\n  borderRadius: 5,\n  padding: 10,\n  marginBottom: 10,\n};\n\nconst App = () => {\n  //States\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [newFilter, setNewFilter] = useState('');\n  const [message, setMessage] = useState('');\n  const [messageStyle, setMessageStyle] = useState({});\n  //Event handlers\n  const handleNameChange = (event) => setNewName(event.target.value);\n  const handleNumberChange = (event) => setNewNumber(event.target.value);\n  const handleFilterChange = (event) => setNewFilter(event.target.value);\n\n  useEffect(() => {\n    const fetchPersons = async () => {\n      await dataAPI.getAll().then((initialData) => setPersons(initialData));\n    };\n\n    fetchPersons();\n    return () => dataAPI.cancelToken();\n  }, []);\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    const personObject = {\n      name: newName,\n      number: newNumber,\n    };\n    const matchPerson = persons.find((e) => newName === e.name);\n\n    matchPerson\n      ? window.confirm(\n          `${matchPerson.name} is already added to phonebook, replace the old number with a new one?`\n        ) &&\n        dataAPI\n          .update(matchPerson.id, { ...matchPerson, number: newNumber })\n          .then((returnedData) =>\n            setPersons(\n              persons.map((e) => (e.id !== matchPerson.id ? e : returnedData))\n            )\n          )\n          .catch((error) => {\n            setMessageStyle(messageNegative);\n            setMessage(\n              `Information of ${matchPerson.name} has already been removed from server`\n            );\n            setTimeout(() => {\n              setMessage(null);\n            }, 3000);\n            setPersons(persons.filter((e) => e.id !== matchPerson.id));\n          })\n      : dataAPI.create(personObject).then((returnedData) => {\n          setPersons(persons.concat(returnedData));\n          console.log('returnedName', returnedData.name);\n          setMessageStyle(messagePositive);\n          setMessage(`Added ${returnedData.name}`);\n          setTimeout(() => {\n            setMessage(null);\n          }, 1500);\n        });\n    setNewName('');\n    setNewNumber('');\n  };\n\n  const deletePerson = (id) =>\n    window.confirm(`Delete ${persons.find((e) => id === e.id).name} ?`) &&\n    (dataAPI.deleteEntry(id), setPersons(persons.filter((e) => e.id !== id)));\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} messageStyle={messageStyle} />\n      <Fields\n        fieldName=\"filter shown with\"\n        newField={newFilter}\n        handleFieldChange={handleFilterChange}\n      />\n      <h2>Add a new</h2>\n      <PersonForm\n        addPerson={addPerson}\n        addName={newName}\n        addNumber={newNumber}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons\n        personList={persons}\n        filterKey={newFilter}\n        deletePerson={deletePerson}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}